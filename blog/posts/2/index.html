
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Markus Kusano</title>
  <meta name="author" content="Markus Kusano">

  
  <meta name="description" content="Order Relations Partial order relations are a fairly simple topic but it was one I initially
struggled with. Order relations are how you define ideas &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://markus-kusano.github.io/blog/posts/2">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Markus Kusano" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Fjalla+One' rel='stylesheet' type='text/css'>
  

</head>

<body    class="collapse-sidebar sidebar-footer" >
  <header role="banner">
</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:markus-kusano.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Home</a></li>
  <li><a href="/blog">Blog</a></li>
  <li><a href="/reading">Reading</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/09/25/partial-orders-and-programming/">Partial Orders and Programming</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-09-25T15:42:00-04:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


  <div class="entry-content"><h2>Order Relations</h2>

<p>Partial order relations are a fairly simple topic but it was one I initially
struggled with. Order relations are how you define ideas like greater than,
less than and equal to. If you are familiar with C++, you can think of this as
overloading the <code>&gt;</code>, <code>&lt;</code> and <code>==</code> operators for your class. We will first
discuss two order relations: total orders and partial orders and then discuss
how they are related to concurrent programming.</p>

<h3>Total Orders</h3>

<p>Total order relations are those used for natural numbers (1,2,3). This is a
fairly intuitive concept which has been taught to us all since Elementary
school. The key idea is that every natural number can be compared with every
other natural number as being greater than less than or equal.</p>

<p>However, there are some concepts in which each item can only be compared to a
subset of items; this is a partial order relation.</p>

<h3>Partial Orders</h3>

<p>Consider the following street addresses:</p>

<ol>
<li>479 Pennsylvania Ave.</li>
<li>481 Pennsylvania Ave.</li>
<li>1802 Oak Lane</li>
</ol>


<p>It makes sense to say that 479 Pennyslvania Ave. comes before 481 Pennsylvania
Ave but, what can you say about the order between 479 Pennsylvania Ave. and
1802 Oak Lane? Street addresses are examples of things that have a partial
order relation.</p>

<p>(the street address example comes from wikipedia&rsquo;s Partial Order page)</p>

<h2>Concurrent Software Testing</h2>

<p>So why is all this math useful? It turns out that concurrent programs can be
represented as partial orders instead of total orders.</p>

<p>One way to verify a concurrent program is to test all possible thread
schedules; if all of them result in a desired output then the program is
guaranteed to be safe. The problem is that this is an astronomically large
number of tests.</p>

<p>Since accesses to different memory locations do not effect each other, you only
need to test schedule orders for each memory location instead of all the
permutations of all the memory locations.</p>

<p>This concept is called partial order reduction and is a well studied solution
to the state explosion problem in concurrent software testing. However, it is
not a perfect solution since it still results in very long testing times for
large scale programs.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/09/13/modifying-a-build-system-to-output-llvm-ir/">Modifying a Build System to Output LLVM IR</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-09-13T15:53:00-04:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


  <div class="entry-content"><h2>Introduction</h2>

<p><a href="http://llvm.org/">LLVM</a> and its intermediate representation (IR) are quickly
becoming and de facto standard for program analysis and instrumentation. This
is a guide to modify an established build system of an application to output
LLVM IR instead of machine code. Specifically, we will outline how to output
LLVM IR for an application using
<a href="https://en.wikipedia.org/wiki/GNU_build_system">autotools</a>.</p>

<h2>Requirements</h2>

<p>The requirements are:</p>

<ul>
<li>The GNU gold linker with plugin support</li>
<li>The LLVMgold plugin</li>
</ul>


<p>Detailed instructions on using the LLVM GNU gold plugin can be found
<a href="http://llvm.org/docs/GoldPlugin.html">here</a>.</p>

<p>A quick summary to check if your system has support for LLVMgold:</p>

<p>Run <code>/usr/bin/ld -v</code> and check if it reports <code>GNU gold</code>. To check if you have
plugin support run <code>/usr/bin/ld -plugin</code>; if it reports <code>missing argument</code> then
you are good to go. If it reports <code>unknown option</code> you will need to install or
build a version of GNU gold that supports plugins.</p>

<p>LLVM provides
<a href="http://llvm.org/docs/GoldPlugin.html#lto-how-to-build">documentation</a>  on
building GNU gold with plugin support and LLVMgold.</p>

<h2>LLVM&rsquo;s gold Plugin</h2>

<p><a href="https://en.wikipedia.org/wiki/Gold_(linker">gold</a>) is part of GNU binutils and
is a linker with support for link time optimization (LTO). LLVM provides a gold
plugin to preform LTO which inherently works by keeping source files as LLVM IR
until link time. At link time, the entire program can be observed and
optimized.</p>

<p>We&rsquo;re not so interested in the LTO aspects but rather the ability to keep files
as LLVM IR until link time. The end result is a set of &ldquo;object files&rdquo; which are
LLVM IR; If you want to make an LLVM pass on an entire program, this is a good
starting point but beyond the scope of this post.</p>

<h2>Autotools</h2>

<p>To work with autotools, we simply need to modify some environment variables to
specify options passed to <code>clang</code>.</p>

<p>If <code>clang</code> and <code>binutils</code> are not in your path, let <code>$PREFIX</code> be where they are
installed. <code>export</code> the following environment variables.</p>

<pre><code>export CC="$PREFIX/bin/clang -emit-llvm"
export CXX="$PREFIX/bin/clang++ -emit-llvm"
export AR="$PREFIX/bin/ar"
export NM="$PREFIX/bin/nm"
</code></pre>

<p>If they are in your path, you simply need:</p>

<pre><code>export CC=clang -emit-llvm
export CXX=clang++ -emit-llvm
</code></pre>

<p>Then, simply build the program as usual. The end result should be a set of
<code>.o</code> files which are all LLVM bitcode.</p>

<p>Without the GNU gold linker and LLVMgold plugin you will get linker errors by
using <code>-emit-llvm</code>.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/08/29/art-of-unix-programming-nuggets/">Art of Unix Programming Nuggets</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-08-29T13:56:00-04:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


  <div class="entry-content"><blockquote><p>One of the many consequences of the exponential power-versus-time curve in
computing, and the corresponding pace of software development, is that 50% of
what one knows becomes obsolete over every 18 months. Unix does not abolish
this phenomenon, but does do a good job of containing it. There&rsquo;s a bedrock
of unchanging basics&mdash;languages, system calls, and tool invocations&mdash;that
one can actually keep using for years, even decades.</p></blockquote>

<p>How much of our education here will be effected by 50% decay in 18 months? We
already are seeing courses being changed (intro to computer engineering,
digital design one and two) and there is talk about the software track (1574,
2574, 3574) being altered as well. These changes, particularly the switch to
FPGAs over programmable logic devices, give great opportunity for us to complain
about walking uphill both ways and to be arrogant about our skills in getting
WinCUPL to work (did you try turning it on and off again?); but, this isn&rsquo;t
very productive.</p>

<p>Overall, this is perhaps more of a general education question that might be
difficult to address directly in an introduction to Unix course but I think it
is an interesting thought to keep in mind while being a full-time student.</p>

<p>Related to this is:</p>

<blockquote><p>Rule of Extensibility: Design for the future, because it will be here sooner
than you think.</p></blockquote>

<p>This rule is something that can be addressed in intro to Unix. The text
surrounding this rule emphasizes quick prototyping (&ldquo;Make it run, then make it
right, then make it fast&rdquo;). My programming knowledge is largely in C/C++, which
is a very comfortable environment to me. I can hack on a python script written
by someone else but I&rsquo;m not familiar with all the different ways higher level
languages can quickly create solutions.</p>

<p>The author also talks about a strategy of making the backend a C library and
the frontend possibly a high-level language calling into this library. I think
it would be nice to learn how to do this (communication over sockets, calling C
code from python)</p>

<p>Quotes from The Art of Unix Programming.
<a href="http://catb.org/esr/writings/taoup/html/">http://catb.org/esr/writings/taoup/html/</a></p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/index.html">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    
  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2016 - Markus Kusano <br/>
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a>, customized with <a href="https://github.com/mjhea0/whiterspace">whiterspace</a>.</span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'markusk';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>











</body>
</html>
